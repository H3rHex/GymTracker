<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gym Tracker</title>

    <link rel="icon" type="image/webp" href="/assets/images/favicon-ligth.webp">

    <link rel="stylesheet" href="/css/GLOBAL_STYLES/root.css">
    <link rel="stylesheet" href="/css/PAGE_STYLES/index.css">

</head>

<body data-theme="">
    <button id="themeChanger" onclick="changeThemeMode()">
        Light Mode
    </button>

    <header>
        <h2 id="username"></h2>
        <span class="logo"></span>

        <div class="left">
            <nav>
                <a href="/login">Iniciar Sesion</a>
                <a href="/register">Registrarse</a>
            </nav>
        </div>
    </header>
    <main>
        <h3>Bienvenido/a a GymTracker â€“ Tu progreso, en un solo lugar.</h3>
        <div class="card">
            <h2>Â¿AÃºn no tienes cuenta?</h2>
            <p>Ãšnete gratis y empieza a registrar tu progreso en el gym. Visualiza tu evoluciÃ³n y mantente motivado cada
                dÃ­a. ğŸ’ª</p>
            <a href="/register" class="btn">Registrarse</a>
        </div>

        <div>
            <section>
                <h3>ğŸ‹ï¸â€â™€ï¸ Â¿QuÃ© es GymTracker?</h3>
                <p><strong>GymTracker</strong>es tu compaÃ±ero personal de entrenamiento.</p>
                <p>Una aplicaciÃ³n pensada para ayudarte a registrar tus rutinas, ver tu evoluciÃ³n y mantenerte motivado
                    cadadÃ­a.
                </p>
                <p>Ya no tienes que recordar quÃ© hiciste la semana pasada ni adivinar cuÃ¡nto peso levantar hoy:
                    GymTracker lo guarda por ti y te guÃ­a en el proceso.</p>
                <strong>ğŸ‘‰ Ideal tanto si estÃ¡s empezando en el gimnasio como si llevas tiempo entrenando.</strong>
            </section>
            <section>
                <h3>ğŸš€ Â¿CÃ³mo funciona?</h3>
                <p>1ï¸âƒ£ <strong>RegÃ­strate</strong> gratis y crea tu perfil.</p>
                <p>2ï¸âƒ£ <strong>Registra tus rutinas</strong> y ejercicios fÃ¡cilmente.</p>
                <p>3ï¸âƒ£ <strong>Visualiza tu progreso</strong> con grÃ¡ficos y estadÃ­sticas.</p>
                <p>4ï¸âƒ£ <strong>Mantente motivado</strong> con recordatorios y logros.</p>
            </section>
        </div>
    </main>
</body>

<!-- Scripts -->
<script src="/js/changeThemeMode.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        if (localStorage.getItem("username") !== null && localStorage.getItem("password") !== null) {
            checkLogin(); // Llama a la funciÃ³n
        } else {
            console.log("No hay login");
        }
    });

    async function checkLogin() {
        const username = localStorage.getItem("username");
        const password = localStorage.getItem("password");

        try {
            const response = await fetch("/user_login", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ username, password })
            });

            if (response.status === 200) {
                // âœ… Redirigir a otra pÃ¡gina
                window.location.href = '/home';
            } else {
                const msg = await response.text();
                throw new Error(msg || "Error en la peticiÃ³n");
            }
        } catch (error) {
            console.error('âŒ Error:', error.message);
            alert(error.message);
        }
    }
</script>

</html>